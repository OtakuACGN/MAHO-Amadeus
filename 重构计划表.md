首先，目前短期目标是，可以实现屏幕上有两个或多个角色。然后我可以直接说话然后就问他们这时候会有一个类似意图识别的东西来决定这一句话会发给他们还是发给全部人。同时角色也可以互相对话。

思考：
- 最终要想要实现向命运石之门那样子的演出效果。所以假如有多个角色想要回答的话，那么就必须以存在一个队列机制。具体来说就是目前的对话框。算是已经解耦好了，这个对话框的话，一个时刻它只能存在一段话。
- 那么当我说完一句话之后，前端还是直接照样发给后端，这时候后端要有一个意图识别，暂时决定由导演来承担这个角色，所以原本是直接由前端决定发给谁的，这个得改了。
- 导演收到消息之后，首先先将这一轮对话存到剧本里面。剧本里面存在一个公共上下文窗口，然后再根据意图识别的结果，决定把这一句话发给谁。同时这个剧本还存在世界观之类的信息。
- 那么后端的组件得先添加一个意图识别专用的，虽然实际上还是一个LLM。
- 因为刚才说的现在有多个角色轮流对话了，所以得考虑一下。当角色说完之后，点击一下才会开始输入下一个角色的内容，那么对话框可能还需要再进行一个结合。意思就是用户输入和角色返回信息的解耦开。
- 关于整一个vad，也就是用户说话的内容。这一部分实际上很简单，因为它就只是相当于一个自动检测的语音输入而已，只需要在最外层也就是说话的这个地方。把语音转成文字，然后再塞进去，触发标准流程就行了。
- 角色，自己也拥有自己的独立上下文，这个部分的，

问答流程：
- 用户说话，vad检测到用户说话完毕，直接发送音频切片
- 后端asr组件收到音频切片，进行语音识别，得到用户的这一句话，并将其发送给后端的导演组件
- 后端的导演组件收到这一句话，首先将其存到剧本的公共上下文窗口里面，然后进行意图识别，决定将这一句话发给哪个角色
- 后端的导演组件将用户的这一句话发送给指定的角色组件（或者多个角色组件）
- 角色组件收到用户的这一句话，结合自己的独立上下文进行处理，生成回答并发送给后端的导演组件
- 导演接收到角色的回答，先将其存到剧本，然后再发给前端。
- 前端收到角色的回答和TTS，先将其存到一个播放列表中。
- 前端从播放列表中依次取出回答和TTS进行播放和显示，每次播放完之后，先暂时不要马上切换。当用户在播放完的状态下，点击鼠标才会进行下一个状态的播放。
- 当播放完所有角色的回答之后，前端重新进入等待用户说话的状态。

不太可能会改的：
- 后端的llm,asr,translator组件
- 前端的login，

Director：
